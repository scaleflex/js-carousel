!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CloudImageCarousel=t():e.CloudImageCarousel=t()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>ie});const n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=(()=>{if("undefined"==typeof document)return!1;const e=n[0],t={};for(const o of n){const n=o?.[1];if(n in document){for(const[n,r]of o.entries())t[e[n]]=r;return t}}return!1})(),r={change:o.fullscreenchange,error:o.fullscreenerror};let i={request:(e=document.documentElement,t)=>new Promise(((n,r)=>{const a=()=>{i.off("change",a),n()};i.on("change",a);const s=e[o.requestFullscreen](t);s instanceof Promise&&s.then(a).catch(r)})),exit:()=>new Promise(((e,t)=>{if(!i.isFullscreen)return void e();const n=()=>{i.off("change",n),e()};i.on("change",n);const r=document[o.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)})),toggle:(e,t)=>i.isFullscreen?i.exit():i.request(e,t),onchange(e){i.on("change",e)},onerror(e){i.on("error",e)},on(e,t){const n=r[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=r[e];n&&document.removeEventListener(n,t,!1)},raw:o};Object.defineProperties(i,{isFullscreen:{get:()=>Boolean(document[o.fullscreenElement])},element:{enumerable:!0,get:()=>document[o.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[o.fullscreenEnabled])}}),o||(i={isEnabled:!1});const a=i;var s="ci-carousel-bullet",l="active",c="click",u="wheel",h="keydown",d="slide",m="fade",p="ArrowLeft",f="ArrowRight",v="Escape",b='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15 6L9 12L15 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',y='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',g='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 3L9 3M3 3L3 9M3 3L8 8M21 3L15 3M21 3L21 9M21 3L16 8M3 21L9 21M3 21L3 15M3 21L8 16M21 21L15 21M21 21L21 15M21 21L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n</svg>',w=function(e,t,n,o){var r=document.createElement("button");return r.classList.add("ci-carousel-btn",e),r.setAttribute("aria-label",n),r.innerHTML=t,r.addEventListener(c,o),r};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,x(o.key),o)}}function x(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=C(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var z=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.carousel=t,this.container=t.controlsContainer,this.options=t.options,this.handleKeyDown=this.handleKeyDown.bind(this),this.setupControls()},t=[{key:"setupControls",value:function(){var e=this;if(this.options.showControls){var t=w("ci-carousel-prev",b,"Previous Image",(function(){return e.carousel.prev()})),n=w("ci-carousel-next",y,"Next Image",(function(){return e.carousel.next()})),o=w("ci-carousel-fullscreen",g,"Toggle Fullscreen",(function(){return e.carousel.toggleFullscreen()}));this.container.appendChild(t),this.container.appendChild(o),this.container.appendChild(n),this.setupKeyboardControls()}}},{key:"handleKeyDown",value:function(e){switch(e.key){case p:this.carousel.prev();break;case f:this.carousel.next();break;case v:this.carousel.resetZoom()}}},{key:"setupKeyboardControls",value:function(){document.addEventListener(h,this.handleKeyDown)}},{key:"destroy",value:function(){document.removeEventListener(h,this.handleKeyDown)}}],t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),L=function(){return L=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},L.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}));var S,k="undefined"!=typeof document&&!!document.documentMode;function I(){return S||(S=document.createElement("div").style)}var P=["webkit","moz","ms"],O={};function M(e){if(O[e])return O[e];var t=I();if(e in t)return O[e]=e;for(var n=e[0].toUpperCase()+e.slice(1),o=P.length;o--;){var r="".concat(P[o]).concat(n);if(r in t)return O[e]=r}}function j(e,t){return parseFloat(t[M(e)])||0}function A(e,t,n){void 0===n&&(n=window.getComputedStyle(e));var o="border"===t?"Width":"";return{left:j("".concat(t,"Left").concat(o),n),right:j("".concat(t,"Right").concat(o),n),top:j("".concat(t,"Top").concat(o),n),bottom:j("".concat(t,"Bottom").concat(o),n)}}function F(e,t,n){e.style[M(t)]=n}function T(e){var t=e.parentNode,n=window.getComputedStyle(e),o=window.getComputedStyle(t),r=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:A(e,"margin",n),border:A(e,"border",n)},parent:{style:o,width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right,padding:A(t,"padding",o),border:A(t,"border",o)}}}var H={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function D(e,t,n,o){H[e].split(" ").forEach((function(e){t.addEventListener(e,n,o)}))}function V(e,t,n){H[e].split(" ").forEach((function(e){t.removeEventListener(e,n)}))}function B(e,t){for(var n=e.length;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function q(e,t){var n;if(t.touches){n=0;for(var o=0,r=t.touches;o<r.length;o++){var i=r[o];i.pointerId=n++,q(e,i)}}else(n=B(e,t))>-1&&e.splice(n,1),e.push(t)}function N(e){for(var t,n=(e=e.slice(0)).pop();t=e.pop();)n={clientX:(t.clientX-n.clientX)/2+n.clientX,clientY:(t.clientY-n.clientY)/2+n.clientY};return n}function W(e){if(e.length<2)return 0;var t=e[0],n=e[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-t.clientX),2)+Math.pow(Math.abs(n.clientY-t.clientY),2))}function X(e,t){return 1===e.nodeType&&" ".concat(function(e){return(e.getAttribute("class")||"").trim()}(e)," ").indexOf(" ".concat(t," "))>-1}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?H={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(H={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var Y=/^http:[\w\.\/]+svg$/;var Z={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:function(e,t,n){var o=t.x,r=t.y,i=t.scale,a=t.isSVG;if(F(e,"transform","scale(".concat(i,") translate(").concat(o,"px, ").concat(r,"px)")),a&&k){var s=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",s)}},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function R(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(1!==e.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=L(L({},Z),t);var n=function(e){return Y.test(e.namespaceURI)&&"svg"!==e.nodeName.toLowerCase()}(e),o=e.parentNode;o.style.overflow=t.overflow,o.style.userSelect="none",o.style.touchAction=t.touchAction,(t.canvas?o:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,F(e,"transformOrigin","string"==typeof t.origin?t.origin:n?"0 0":"50% 50%");var r,i,a,s,l,c,u=0,h=0,d=1,m=!1;function p(t,n,o){if(!o.silent){var r=new CustomEvent(t,{detail:n});e.dispatchEvent(r)}}function f(t,o,r){var i={x:u,y:h,scale:d,isSVG:n,originalEvent:r};return requestAnimationFrame((function(){"boolean"==typeof o.animate&&(o.animate?function(e,t){var n=M("transform");F(e,"transition","".concat(n," ").concat(t.duration,"ms ").concat(t.easing))}(e,o):F(e,"transition","none")),o.setTransform(e,i,o),p(t,i,o),p("panzoomchange",i,o)})),i}function v(n,o,r,i){var a=L(L({},t),i),s={x:u,y:h,opts:a};if(!a.force&&(a.disablePan||a.panOnlyWhenZoomed&&d===a.startScale))return s;if(n=parseFloat(n),o=parseFloat(o),a.disableXAxis||(s.x=(a.relative?u:0)+n),a.disableYAxis||(s.y=(a.relative?h:0)+o),a.contain){var l=T(e),c=l.elem.width/d,m=l.elem.height/d,p=c*r,f=m*r,v=(p-c)/2,b=(f-m)/2;if("inside"===a.contain){var y=(-l.elem.margin.left-l.parent.padding.left+v)/r,g=(l.parent.width-p-l.parent.padding.left-l.elem.margin.left-l.parent.border.left-l.parent.border.right+v)/r;s.x=Math.max(Math.min(s.x,g),y);var w=(-l.elem.margin.top-l.parent.padding.top+b)/r,C=(l.parent.height-f-l.parent.padding.top-l.elem.margin.top-l.parent.border.top-l.parent.border.bottom+b)/r;s.y=Math.max(Math.min(s.y,C),w)}else if("outside"===a.contain){y=(-(p-l.parent.width)-l.parent.padding.left-l.parent.border.left-l.parent.border.right+v)/r,g=(v-l.parent.padding.left)/r;s.x=Math.max(Math.min(s.x,g),y);w=(-(f-l.parent.height)-l.parent.padding.top-l.parent.border.top-l.parent.border.bottom+b)/r,C=(b-l.parent.padding.top)/r;s.y=Math.max(Math.min(s.y,C),w)}}return a.roundPixels&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),s}function b(n,o){var r=L(L({},t),o),i={scale:d,opts:r};if(!r.force&&r.disableZoom)return i;var a=t.minScale,s=t.maxScale;if(r.contain){var l=T(e),c=l.elem.width/d,u=l.elem.height/d;if(c>1&&u>1){var h=(l.parent.width-l.parent.border.left-l.parent.border.right)/c,m=(l.parent.height-l.parent.border.top-l.parent.border.bottom)/u;"inside"===t.contain?s=Math.min(s,h,m):"outside"===t.contain&&(a=Math.max(a,h,m))}}return i.scale=Math.min(Math.max(n,a),s),i}function y(e,t,o,r){var i=v(e,t,d,o);return u!==i.x||h!==i.y?(u=i.x,h=i.y,f("panzoompan",i.opts,r)):{x:u,y:h,scale:d,isSVG:n,originalEvent:r}}function g(e,t,n){var o=b(e,t),r=o.opts;if(r.force||!r.disableZoom){e=o.scale;var i=u,a=h;if(r.focal){var s=r.focal;i=(s.x/e-s.x/d+u*e)/e,a=(s.y/e-s.y/d+h*e)/e}var l=v(i,a,e,{relative:!1,force:!0});return u=l.x,h=l.y,d=e,f("panzoomzoom",r,n)}}function w(e,n){var o=L(L(L({},t),{animate:!0}),n);return g(d*Math.exp((e?1:-1)*o.step),o)}function C(t,o,r,i){var a=T(e),s=a.parent.width-a.parent.padding.left-a.parent.padding.right-a.parent.border.left-a.parent.border.right,l=a.parent.height-a.parent.padding.top-a.parent.padding.bottom-a.parent.border.top-a.parent.border.bottom,c=o.clientX-a.parent.left-a.parent.padding.left-a.parent.border.left-a.elem.margin.left,u=o.clientY-a.parent.top-a.parent.padding.top-a.parent.border.top-a.elem.margin.top;n||(c-=a.elem.width/d/2,u-=a.elem.height/d/2);var h={x:c/s*(s*t),y:u/l*(l*t)};return g(t,L(L({},r),{animate:!1,focal:h}),i)}g(t.startScale,{animate:!1,force:!0}),setTimeout((function(){y(t.startX,t.startY,{animate:!1,force:!0})}));var E=[];function x(e){if(!function(e,t){for(var n=e;null!=n;n=n.parentNode)if(X(n,t.excludeClass)||t.exclude.indexOf(n)>-1)return!0;return!1}(e.target,t)){q(E,e),m=!0,t.handleStartEvent(e),r=u,i=h,p("panzoomstart",{x:u,y:h,scale:d,isSVG:n,originalEvent:e},t);var o=N(E);a=o.clientX,s=o.clientY,l=d,c=W(E)}}function z(e){if(m&&void 0!==r&&void 0!==i&&void 0!==a&&void 0!==s){q(E,e);var n=N(E),o=E.length>1,u=d;if(o)0===c&&(c=W(E)),C(u=b((W(E)-c)*t.step/80+l).scale,n,{animate:!1},e);o&&!t.pinchAndPan||y(r+(n.clientX-a)/u,i+(n.clientY-s)/u,{animate:!1},e)}}function S(e){1===E.length&&p("panzoomend",{x:u,y:h,scale:d,isSVG:n,originalEvent:e},t),function(e,t){if(t.touches)for(;e.length;)e.pop();else{var n=B(e,t);n>-1&&e.splice(n,1)}}(E,e),m&&(m=!1,r=i=a=s=void 0)}var k=!1;function I(){k||(k=!0,D("down",t.canvas?o:e,x),D("move",document,z,{passive:!0}),D("up",document,S,{passive:!0}))}return t.noBind||I(),{bind:I,destroy:function(){k=!1,V("down",t.canvas?o:e,x),V("move",document,z),V("up",document,S)},eventNames:H,getPan:function(){return{x:u,y:h}},getScale:function(){return d},getOptions:function(){return function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t)},handleDown:x,handleMove:z,handleUp:S,pan:y,reset:function(e){var n=L(L(L({},t),{animate:!0,force:!0}),e);d=b(n.startScale,n).scale;var o=v(n.startX,n.startY,d,n);return u=o.x,h=o.y,f("panzoomreset",n)},resetStyle:function(){o.style.overflow="",o.style.userSelect="",o.style.touchAction="",o.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",F(e,"transformOrigin","")},setOptions:function(n){for(var r in void 0===n&&(n={}),n)n.hasOwnProperty(r)&&(t[r]=n[r]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(o.style.cursor=e.style.cursor="",(t.canvas?o:e).style.cursor=t.cursor),n.hasOwnProperty("overflow")&&(o.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(o.style.touchAction=n.touchAction,e.style.touchAction=n.touchAction)},setStyle:function(t,n){return F(e,t,n)},zoom:g,zoomIn:function(e){return w(!0,e)},zoomOut:function(e){return w(!1,e)},zoomToPoint:C,zoomWithWheel:function(e,n){e.preventDefault();var o=L(L(L({},t),n),{animate:!1}),r=(0===e.deltaY&&e.deltaX?e.deltaX:e.deltaY)<0?1:-1;return C(b(d*Math.exp(r*o.step/3),o).scale,e,o,e)}}}R.defaultOptions=Z;function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Q(o.key),o)}}function Q(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=K(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}var _=function(){return e=function e(t){var n,o,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.carousel=t,this.imageContainer=t.imageContainer,this.panzoomInstance=null,this.debouncedWheel=(n=function(e){i.panzoomInstance&&i.panzoomInstance.zoomWithWheel(e)},o=16,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(r),r=setTimeout((function(){clearTimeout(r),n.apply(void 0,t)}),o)}),this.imageContainer.addEventListener(u,this.handleWheel.bind(this)),this.initializeVisibleImage()},t=[{key:"initializeVisibleImage",value:function(){var e=this,t=this.getCurrentWrapper();if(t){var n=t.querySelector(".".concat("ci-carousel-image"));n&&(n.complete?this.initPanzoom(n):n.addEventListener("load",(function(){return e.initPanzoom(n)}),{once:!0}))}}},{key:"initPanzoom",value:function(e){var t;if((null===(t=this.panzoomInstance)||void 0===t?void 0:t.getElement())!==e){this.panzoomInstance&&this.cleanupCurrentPanzoom(),this.currentElement=e,this.panzoomInstance=R(e,{maxScale:4,minScale:1,contain:"outside",startScale:1,panOnlyWhenZoomed:!1,duration:200,step:.3,cursor:"default",setContainer:!0});var n=e.parentElement;this.currentHandlers={wheel:this.panzoomInstance.zoomWithWheel,pointerdown:this.panzoomInstance.handleDown,pointermove:this.panzoomInstance.handleMove,pointerup:this.panzoomInstance.handleUp,panzoomchange:function(t){var n=t.detail.scale;e.style.cursor=n>1?"move":"zoom-in"}},n.addEventListener(u,this.currentHandlers.wheel),n.addEventListener("pointerdown",this.currentHandlers.pointerdown),document.addEventListener("pointermove",this.currentHandlers.pointermove),document.addEventListener("pointerup",this.currentHandlers.pointerup),e.addEventListener("panzoomchange",this.currentHandlers.panzoomchange),e.style.cursor="zoom-in"}}},{key:"handleWheel",value:function(e){this.panzoomInstance||this.initializeVisibleImage(),this.debouncedWheel(e)}},{key:"getCurrentWrapper",value:function(){return this.imageContainer.children[this.carousel.currentIndex]}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.panzoomInstance||this.initializeVisibleImage(),this.panzoomInstance&&this.panzoomInstance.zoomIn(U({animate:!0},e))}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.panzoomInstance&&this.panzoomInstance.zoomOut(U({animate:!0},e))}},{key:"resetZoom",value:function(){this.panzoomInstance&&(this.panzoomInstance.reset({animate:!0}),this.cleanupCurrentPanzoom())}},{key:"cleanupCurrentPanzoom",value:function(){if(this.panzoomInstance&&this.currentElement){var e=this.currentElement.parentElement;this.currentElement&&e&&this.currentHandlers&&(e.removeEventListener(u,this.currentHandlers.wheel),e.removeEventListener("pointerdown",this.currentHandlers.pointerdown),document.removeEventListener("pointermove",this.currentHandlers.pointermove),document.removeEventListener("pointerup",this.currentHandlers.pointerup),this.currentElement.removeEventListener("panzoomchange",this.currentHandlers.panzoomchange)),this.panzoomInstance.destroy(),this.panzoomInstance=null,this.currentElement=null,this.currentHandlers=null}}},{key:"destroy",value:function(){this.cleanupCurrentPanzoom(),this.imageContainer.removeEventListener(u,this.handleWheel)}}],t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,re(o.key),o)}}function oe(e,t,n){return(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=ee(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}const ie=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,"mainView",void 0),oe(this,"imageContainer",void 0),oe(this,"thumbnailsContainer",void 0),oe(this,"controlsContainer",void 0),oe(this,"bulletsContainer",void 0),!t)throw new Error("Container parameter is required");if(this.container="string"==typeof t?document.querySelector(t):t,!(this.container&&this.container instanceof HTMLElement))throw new Error("Invalid container: ".concat("string"==typeof t?'Element "'.concat(t,'" not found'):"Container must be a valid HTML element"));this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({images:n.images||[],autoplay:n.autoplay||!1,autoplayInterval:n.autoplayInterval||3e3,cycle:n.cycle||!0,showFilenames:n.showFilenames||!1,showThumbnails:n.showThumbnails||!0,showBullets:n.showBullets||!1,showControls:n.showControls||!0,transitionEffect:n.transitionEffect||m},n),this.currentIndex=0,this.images=[],this.isFullscreen=!1},t=[{key:"init",value:function(){this.createStructure(),this.options.showControls&&(this.controls=new z(this),this.zoomPanControls=new _(this)),this.options.autoplay&&this.startAutoplay(),this.loadImages(this.options.images)}},{key:"createStructure",value:function(){this.container.classList.add("ci-carousel"),this.container.setAttribute("role","region"),this.container.setAttribute("aria-label","Image carousel"),this.mainView=document.createElement("div"),this.mainView.classList.add("ci-carousel-main"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("ci-carousel-images"),this.imageContainer.setAttribute("role","list"),this.controlsContainer=document.createElement("div"),this.controlsContainer.classList.add("ci-carousel-controls"),this.options.showBullets&&(this.bulletsContainer=document.createElement("div"),this.bulletsContainer.classList.add("ci-carousel-bullets")),this.options.showThumbnails&&(this.container.classList.add("ci-carousel-has-thumbnails"),this.thumbnailsContainer=document.createElement("div"),this.thumbnailsContainer.classList.add("ci-carousel-thumbnails")),this.mainView.appendChild(this.imageContainer),this.container.appendChild(this.mainView),this.container.appendChild(this.controlsContainer),this.thumbnailsContainer&&this.container.appendChild(this.thumbnailsContainer),this.bulletsContainer&&(this.container.classList.add("ci-carousel-has-bullets"),this.container.appendChild(this.bulletsContainer))}},{key:"loadImages",value:function(e){Array.isArray(e)&&(this.images=e.map((function(e){return{src:e,loaded:!1}})),this.renderImages())}},{key:"renderImages",value:function(){var e=this;this.imageContainer.innerHTML="",this.images.forEach((function(t,n){var o=document.createElement("div");o.classList.add("ci-carousel-image-wrapper"),o.classList.add(e.options.transitionEffect),o.style.display=n===e.currentIndex?"block":"none",o.setAttribute("role","listitem"),o.setAttribute("aria-label","Slide ".concat(n+1," of ").concat(e.images.length)),n===e.currentIndex&&o.classList.add(l);var r=new Image;if(r.classList.add("ci-carousel-image"),r.dataset.src=t.src,r.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E',r.loading="lazy",o.appendChild(r),e.options.showFilenames){var i=document.createElement("div");i.classList.add("ci-carousel-filename"),i.textContent=t.src.split("/").pop().split(".")[0],o.appendChild(i)}e.imageContainer.appendChild(o)})),this.options.showThumbnails&&this.renderThumbnails(),this.options.showBullets&&this.renderBullets(),this.setupLazyLoading()}},{key:"setupLazyLoading",value:function(){var e=this;"IntersectionObserver"in window?(this.observer=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var n=e.target,o=n.dataset.src;o&&(n.src=o,delete n.dataset.src,t.unobserve(n))}}))})),this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(t){e.observer.observe(t)}))):this.loadVisibleImages()}},{key:"loadVisibleImages",value:function(){this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(e){var t=e.dataset.src;t&&(e.src=t,delete e.dataset.src)}))}},{key:"renderThumbnails",value:function(){var e=this;this.thumbnailsContainer.innerHTML="";var t=document.createDocumentFragment();this.images.forEach((function(n,o){var r=document.createElement("div");r.classList.add("ci-carousel-thumbnail"),r.dataset.index=o,o===e.currentIndex&&r.classList.add(l);var i=new Image;i.src=n.src,r.appendChild(i),t.appendChild(r)})),this.thumbnailsContainer.appendChild(t),this.thumbnailClickHandler||(this.thumbnailClickHandler=function(t){var n=t.target.closest(".ci-carousel-thumbnail");if(n){var o=parseInt(n.dataset.index,10);e.goToSlide(o)}},this.thumbnailsContainer.addEventListener(c,this.thumbnailClickHandler))}},{key:"renderBullets",value:function(){var e=this;if(this.options.showBullets&&this.bulletsContainer){this.bulletsContainer.innerHTML="";var t=document.createDocumentFragment();this.images.forEach((function(n,o){var r=document.createElement("button");r.classList.add(s),r.dataset.index=o,o===e.currentIndex&&r.classList.add(l),t.appendChild(r)})),this.bulletsContainer.appendChild(t),this.bulletClickHandler||(this.bulletClickHandler=function(t){var n=t.target.closest(".".concat(s));if(n){var o=parseInt(n.dataset.index,10);e.goToSlide(o)}},this.bulletsContainer.addEventListener(c,this.bulletClickHandler))}}},{key:"goToSlide",value:function(e){e<0?e=this.options.cycle?this.images.length-1:0:e>=this.images.length&&(e=this.options.cycle?0:this.images.length-1);var t=this.currentIndex;this.currentIndex=e,this.options.autoplay&&this.resetAutoplay(),this.updateSlide(t)}},{key:"updateSlide",value:function(e){var t=this.imageContainer.children,n=t[e],o=t[this.currentIndex];if(n.classList.remove(l),o.classList.remove(l),(this.options.transitionEffect===d||this.options.transitionEffect===m)&&o.classList.add(l),this.options.showThumbnails){var r=this.thumbnailsContainer.children;r[e].classList.remove(l),r[this.currentIndex].classList.add(l)}if(this.options.showBullets){var i=this.bulletsContainer.children;i[e].classList.remove(l),i[this.currentIndex].classList.add(l)}this.zoomPanControls&&(this.zoomPanControls.resetZoom(),this.zoomPanControls.initializeVisibleImage())}},{key:"next",value:function(){this.goToSlide(this.currentIndex+1)}},{key:"prev",value:function(){this.goToSlide(this.currentIndex-1)}},{key:"zoomIn",value:function(){this.zoomPanControls&&this.zoomPanControls.zoomIn({animate:!0})}},{key:"zoomOut",value:function(){this.zoomPanControls&&this.zoomPanControls.zoomOut({animate:!0})}},{key:"resetZoom",value:function(){this.zoomPanControls&&this.zoomPanControls.resetZoom()}},{key:"toggleFullscreen",value:function(){var e=this;a.isEnabled&&(a.toggle(this.container),a.on("change",(function(){e.isFullscreen=a.isFullscreen,e.container.classList.toggle("is-fullscreen",e.isFullscreen)})))}},{key:"startAutoplay",value:function(){var e=this;this.autoplayInterval=setInterval((function(){e.next()}),this.options.autoplayInterval)}},{key:"stopAutoplay",value:function(){this.autoplayInterval&&clearInterval(this.autoplayInterval)}},{key:"resetAutoplay",value:function(){this.stopAutoplay(),this.startAutoplay()}},{key:"destroy",value:function(){var e,t;this.autoplayInterval&&clearInterval(this.autoplayInterval),this.observer&&this.observer.disconnect(),this.thumbnailClickHandler&&(null===(e=this.thumbnailsContainer)||void 0===e||e.removeEventListener(c,this.thumbnailClickHandler)),this.bulletClickHandler&&(null===(t=this.bulletsContainer)||void 0===t||t.removeEventListener(c,this.bulletClickHandler)),this.zoomPanControls&&this.zoomPanControls.destroy(),this.controls&&this.controls.destroy(),a.isEnabled&&a.off("change"),this.images=[],this.container=null,this.mainView=null,this.imageContainer=null,this.thumbnailsContainer=null,this.controlsContainer=null,this.bulletsContainer=null}}],t&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();return t=t.default})()));