!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CloudImageCarousel=t():e.CloudImageCarousel=t()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>f});var n="click",i=function(e,t,n){var i=document.createElement("button");return i.classList.add("ci-carousel-btn",e),i.innerHTML=t,i.addEventListener("click",n),i};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.carousel=t,this.container=t.controlsContainer,this.options=t.options,this.setupControls()},t=[{key:"setupControls",value:function(){var e=this;if(this.options.showControls){var t=i("ci-carousel-prev","←",(function(){return e.carousel.prev()})),n=i("ci-carousel-next","→",(function(){return e.carousel.next()})),o=i("ci-carousel-zoom-in","+",(function(){return e.carousel.zoomIn()})),r=i("ci-carousel-zoom-out","-",(function(){return e.carousel.zoomOut()})),s=i("ci-carousel-zoom-reset","↺",(function(){return e.carousel.resetZoom()})),a=i("ci-carousel-fullscreen","⤢",(function(){return e.carousel.toggleFullscreen()}));this.container.appendChild(t),this.container.appendChild(r),this.container.appendChild(s),this.container.appendChild(o),this.container.appendChild(a),this.container.appendChild(n),this.setupKeyboardControls()}}},{key:"setupKeyboardControls",value:function(){var e=this;document.addEventListener("keydown",(function(t){switch(t.key){case"ArrowLeft":e.carousel.prev();break;case"ArrowRight":e.carousel.next();break;case"Escape":e.carousel.resetZoom()}}))}}],t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),l="active";function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function d(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}const f=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"mainView",void 0),d(this,"imageContainer",void 0),d(this,"thumbnailsContainer",void 0),d(this,"controlsContainer",void 0),d(this,"bulletsContainer",void 0),!t)throw new Error("Container parameter is required");if(this.container="string"==typeof t?document.querySelector(t):t,!(this.container&&this.container instanceof HTMLElement))throw new Error("Invalid container: ".concat("string"==typeof t?'Element "'.concat(t,'" not found'):"Container must be a valid HTML element"));this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({images:n.images||[],autoplay:n.autoplay||!1,autoplayInterval:n.autoplayInterval||3e3,cycle:n.cycle||!0,showFilenames:n.showFilenames||!1,showThumbnails:n.showThumbnails||!0,showBullets:n.showBullets||!1,showControls:n.showControls||!0,transitionEffect:n.transitionEffect||"slide"},n),this.currentIndex=0,this.images=[],this.isFullscreen=!1,this.scale=1},(t=[{key:"init",value:function(){this.createStructure(),this.options.showControls&&new a(this),this.options.autoplay&&this.startAutoplay(),this.loadImages(this.options.images)}},{key:"createStructure",value:function(){this.container.classList.add("ci-carousel"),this.mainView=document.createElement("div"),this.mainView.classList.add("ci-carousel-main"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("ci-carousel-images"),this.controlsContainer=document.createElement("div"),this.controlsContainer.classList.add("ci-carousel-controls"),this.options.showBullets&&(this.bulletsContainer=document.createElement("div"),this.bulletsContainer.classList.add("ci-carousel-bullets")),this.options.showThumbnails&&(this.thumbnailsContainer=document.createElement("div"),this.thumbnailsContainer.classList.add("ci-carousel-thumbnails")),this.mainView.appendChild(this.imageContainer),this.container.appendChild(this.mainView),this.container.appendChild(this.controlsContainer),this.thumbnailsContainer&&this.container.appendChild(this.thumbnailsContainer),this.bulletsContainer&&this.container.appendChild(this.bulletsContainer)}},{key:"loadImages",value:function(e){Array.isArray(e)&&(this.images=e.map((function(e){return{src:e,loaded:!1}})),this.renderImages())}},{key:"renderImages",value:function(){var e=this;this.imageContainer.innerHTML="",this.images.forEach((function(t,n){var i=document.createElement("div");i.classList.add("ci-carousel-image-wrapper"),i.classList.add(e.options.transitionEffect),i.style.display=n===e.currentIndex?"block":"none",n===e.currentIndex&&i.classList.add(l);var o=new Image;if(o.classList.add("ci-carousel-image"),o.dataset.src=t.src,o.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E',o.loading="lazy",i.appendChild(o),e.options.showFilenames){var r=document.createElement("div");r.classList.add("ci-carousel-filename"),r.textContent=t.src.split("/").pop().split(".")[0],i.appendChild(r)}e.imageContainer.appendChild(i)})),this.options.showThumbnails&&this.renderThumbnails(),this.options.showBullets&&this.renderBullets(),this.setupLazyLoading()}},{key:"setupLazyLoading",value:function(){var e=this;"IntersectionObserver"in window?(this.observer=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var n=e.target,i=n.dataset.src;i&&(n.src=i,delete n.dataset.src,t.unobserve(n))}}))})),this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(t){e.observer.observe(t)}))):this.loadVisibleImages()}},{key:"loadVisibleImages",value:function(){this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(e){var t=e.dataset.src;t&&(e.src=t,delete e.dataset.src)}))}},{key:"renderThumbnails",value:function(){var e=this;this.thumbnailsContainer.innerHTML="",this.images.forEach((function(t,i){var o=document.createElement("div");o.classList.add("ci-carousel-thumbnail"),i===e.currentIndex&&o.classList.add(l);var r=new Image;r.src=t.src,o.appendChild(r),o.addEventListener(n,(function(){return e.goToSlide(i)})),e.thumbnailsContainer.appendChild(o)}))}},{key:"renderBullets",value:function(){var e=this;this.options.showBullets&&this.bulletsContainer&&(this.bulletsContainer.innerHTML="",this.images.forEach((function(t,i){var o=document.createElement("button");o.classList.add("ci-carousel-bullet"),i===e.currentIndex&&o.classList.add(l),o.addEventListener(n,(function(){return e.goToSlide(i)})),e.bulletsContainer.appendChild(o)})))}},{key:"goToSlide",value:function(e){e<0?e=this.options.cycle?this.images.length-1:0:e>=this.images.length&&(e=this.options.cycle?0:this.images.length-1);var t=this.currentIndex;this.currentIndex=e,this.options.autoplay&&this.resetAutoplay(),this.updateSlide(t)}},{key:"updateSlide",value:function(e){var t=this.imageContainer.children,n=t[e],i=t[this.currentIndex];if(n.classList.remove(l),i.classList.remove(l),("slide"===this.options.transitionEffect||"fade"===this.options.transitionEffect)&&i.classList.add(l),this.options.showThumbnails){var o=this.thumbnailsContainer.children;o[e].classList.remove(l),o[this.currentIndex].classList.add(l)}if(this.options.showBullets){var r=this.bulletsContainer.children;r[e].classList.remove(l),r[this.currentIndex].classList.add(l)}}},{key:"next",value:function(){this.goToSlide(this.currentIndex+1)}},{key:"prev",value:function(){this.goToSlide(this.currentIndex-1)}},{key:"zoomIn",value:function(){this.scale*=1.2,this.updateZoom()}},{key:"zoomOut",value:function(){this.scale/=1.2,this.scale<1&&(this.scale=1),this.updateZoom()}},{key:"resetZoom",value:function(){this.scale=1,this.updateZoom()}},{key:"updateZoom",value:function(){this.imageContainer.children[this.currentIndex].style.transform="scale(".concat(this.scale,")")}},{key:"toggleFullscreen",value:function(){this.isFullscreen?document.exitFullscreen&&document.exitFullscreen():this.container.requestFullscreen&&this.container.requestFullscreen(),this.isFullscreen=!this.isFullscreen}},{key:"startAutoplay",value:function(){var e=this;this.autoplayInterval=setInterval((function(){e.next()}),this.options.autoplayInterval)}},{key:"stopAutoplay",value:function(){this.autoplayInterval&&clearInterval(this.autoplayInterval)}},{key:"resetAutoplay",value:function(){this.stopAutoplay(),this.startAutoplay()}},{key:"destroy",value:function(){this.autoplayInterval&&clearInterval(this.autoplayInterval),this.observer&&this.observer.disconnect()}}])&&h(e.prototype,t),i&&h(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();return t=t.default})()));