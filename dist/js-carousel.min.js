!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CloudImageCarousel=e():t.CloudImageCarousel=e()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>L});var n="click",i="active",s="ArrowLeft",r="ArrowRight",a="Escape",o="slide",l="fade",c='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15 6L9 12L15 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',u='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',h='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 3L9 3M3 3L3 9M3 3L8 8M21 3L15 3M21 3L21 9M21 3L16 8M3 21L9 21M3 21L3 15M3 21L8 16M21 21L15 21M21 21L21 15M21 21L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n</svg>',d=function(t,e,i,s){var r=document.createElement("button");return r.classList.add("ci-carousel-btn",t),r.setAttribute("aria-label",i),r.innerHTML=e,r.addEventListener(n,s),r};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,f(i.key),i)}}function f(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}var v=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.carousel=e,this.container=e.controlsContainer,this.options=e.options,this.handleKeyDown=this.handleKeyDown.bind(this),this.setupControls()},e=[{key:"setupControls",value:function(){var t=this;if(this.options.showControls){var e=d("ci-carousel-prev",c,"Previous Image",(function(){return t.carousel.prev()})),n=d("ci-carousel-next",u,"Next Image",(function(){return t.carousel.next()})),i=d("ci-carousel-fullscreen",h,"Toggle Fullscreen",(function(){return t.carousel.toggleFullscreen()}));this.container.appendChild(e),this.container.appendChild(i),this.container.appendChild(n),this.setupKeyboardControls()}}},{key:"handleKeyDown",value:function(t){switch(t.key){case s:this.carousel.prev();break;case r:this.carousel.next();break;case a:this.carousel.resetZoom()}}},{key:"setupKeyboardControls",value:function(){document.addEventListener("keydown",this.handleKeyDown)}}],e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,C(i.key),i)}}function w(t,e,n){return(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=g(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}const L=function(){return t=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"mainView",void 0),w(this,"imageContainer",void 0),w(this,"thumbnailsContainer",void 0),w(this,"controlsContainer",void 0),w(this,"bulletsContainer",void 0),!e)throw new Error("Container parameter is required");if(this.container="string"==typeof e?document.querySelector(e):e,!(this.container&&this.container instanceof HTMLElement))throw new Error("Invalid container: ".concat("string"==typeof e?'Element "'.concat(e,'" not found'):"Container must be a valid HTML element"));this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({images:n.images||[],autoplay:n.autoplay||!1,autoplayInterval:n.autoplayInterval||3e3,cycle:n.cycle||!0,showFilenames:n.showFilenames||!1,showThumbnails:n.showThumbnails||!0,showBullets:n.showBullets||!1,showControls:n.showControls||!0,transitionEffect:n.transitionEffect||l},n),this.currentIndex=0,this.images=[],this.isFullscreen=!1,this.scale=1,this.isDragging=!1,this.startX=0,this.startY=0,this.translateX=0,this.translateY=0},e=[{key:"init",value:function(){this.createStructure(),this.options.showControls&&new v(this),this.options.autoplay&&this.startAutoplay(),this.loadImages(this.options.images),this.setupMouseControls()}},{key:"setupMouseControls",value:function(){var t=this,e=this.imageContainer;e.addEventListener("wheel",(function(e){e.preventDefault();var n=e.deltaY,i=t.getCurrentWrapper();n<0?(t.scale*=1.1,t.scale>1&&i.classList.add("zoomed")):(t.scale/=1.1,t.scale<=1&&(t.scale=1,t.translateX=0,t.translateY=0,i.classList.remove("zoomed"))),t.constrainToBounds(),t.updateZoom()})),e.addEventListener("mousedown",(function(e){var n=t.getCurrentWrapper();t.scale>1&&(e.preventDefault(),t.isDragging=!0,t.startX=e.clientX-t.translateX,t.startY=e.clientY-t.translateY,n.style.cursor="grabbing")})),document.addEventListener("mousemove",(function(e){if(t.isDragging&&t.scale>1){e.preventDefault();var n=e.clientX-t.startX,i=e.clientY-t.startY;t.translateX=n,t.translateY=i,t.constrainToBounds(),t.updateZoom()}})),document.addEventListener("mouseup",(function(){var e=t.getCurrentWrapper();t.isDragging&&(t.isDragging=!1,e.style.cursor="grab")})),document.addEventListener("mouseleave",(function(){var e=t.getCurrentWrapper();t.isDragging&&(t.isDragging=!1,e.style.cursor="grab")}))}},{key:"constrainToBounds",value:function(){var t=this.getCurrentWrapper(),e=this.imageContainer.getBoundingClientRect(),n=t.getBoundingClientRect(),i=(n.width*this.scale-e.width)/2,s=(n.height*this.scale-e.height)/2;this.translateX=i>0?Math.min(Math.max(this.translateX,-i),i):0,this.translateY=s>0?Math.min(Math.max(this.translateY,-s),s):0}},{key:"getCurrentWrapper",value:function(){return this.imageContainer.children[this.currentIndex]}},{key:"createStructure",value:function(){this.container.classList.add("ci-carousel"),this.container.setAttribute("role","region"),this.container.setAttribute("aria-label","Image carousel"),this.mainView=document.createElement("div"),this.mainView.classList.add("ci-carousel-main"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("ci-carousel-images"),this.imageContainer.setAttribute("role","list"),this.controlsContainer=document.createElement("div"),this.controlsContainer.classList.add("ci-carousel-controls"),this.options.showBullets&&(this.bulletsContainer=document.createElement("div"),this.bulletsContainer.classList.add("ci-carousel-bullets")),this.options.showThumbnails&&(this.container.classList.add("ci-carousel-has-thumbnails"),this.thumbnailsContainer=document.createElement("div"),this.thumbnailsContainer.classList.add("ci-carousel-thumbnails")),this.mainView.appendChild(this.imageContainer),this.container.appendChild(this.mainView),this.container.appendChild(this.controlsContainer),this.thumbnailsContainer&&this.container.appendChild(this.thumbnailsContainer),this.bulletsContainer&&(this.container.classList.add("ci-carousel-has-bullets"),this.container.appendChild(this.bulletsContainer))}},{key:"loadImages",value:function(t){Array.isArray(t)&&(this.images=t.map((function(t){return{src:t,loaded:!1}})),this.renderImages())}},{key:"renderImages",value:function(){var t=this;this.imageContainer.innerHTML="",this.images.forEach((function(e,n){var s=document.createElement("div");s.classList.add("ci-carousel-image-wrapper"),s.classList.add(t.options.transitionEffect),s.style.display=n===t.currentIndex?"block":"none",s.setAttribute("role","listitem"),s.setAttribute("aria-label","Slide ".concat(n+1," of ").concat(t.images.length)),n===t.currentIndex&&s.classList.add(i);var r=new Image;if(r.classList.add("ci-carousel-image"),r.dataset.src=e.src,r.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E',r.loading="lazy",s.appendChild(r),t.options.showFilenames){var a=document.createElement("div");a.classList.add("ci-carousel-filename"),a.textContent=e.src.split("/").pop().split(".")[0],s.appendChild(a)}t.imageContainer.appendChild(s)})),this.options.showThumbnails&&this.renderThumbnails(),this.options.showBullets&&this.renderBullets(),this.setupLazyLoading()}},{key:"setupLazyLoading",value:function(){var t=this;"IntersectionObserver"in window?(this.observer=new IntersectionObserver((function(t,e){t.forEach((function(t){if(t.isIntersecting){var n=t.target,i=n.dataset.src;i&&(n.src=i,delete n.dataset.src,e.unobserve(n))}}))})),this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(e){t.observer.observe(e)}))):this.loadVisibleImages()}},{key:"loadVisibleImages",value:function(){this.imageContainer.querySelectorAll(".ci-carousel-image").forEach((function(t){var e=t.dataset.src;e&&(t.src=e,delete t.dataset.src)}))}},{key:"renderThumbnails",value:function(){var t=this;this.thumbnailsContainer.innerHTML="",this.images.forEach((function(e,s){var r=document.createElement("div");r.classList.add("ci-carousel-thumbnail"),s===t.currentIndex&&r.classList.add(i);var a=new Image;a.src=e.src,r.appendChild(a),r.addEventListener(n,(function(){return t.goToSlide(s)})),t.thumbnailsContainer.appendChild(r)}))}},{key:"renderBullets",value:function(){var t=this;this.options.showBullets&&this.bulletsContainer&&(this.bulletsContainer.innerHTML="",this.images.forEach((function(e,s){var r=document.createElement("button");r.classList.add("ci-carousel-bullet"),s===t.currentIndex&&r.classList.add(i),r.addEventListener(n,(function(){return t.goToSlide(s)})),t.bulletsContainer.appendChild(r)})))}},{key:"goToSlide",value:function(t){t<0?t=this.options.cycle?this.images.length-1:0:t>=this.images.length&&(t=this.options.cycle?0:this.images.length-1);var e=this.currentIndex;this.currentIndex=t,this.options.autoplay&&this.resetAutoplay(),this.updateSlide(e)}},{key:"updateSlide",value:function(t){var e=this.imageContainer.children,n=e[t],s=e[this.currentIndex];if(n.classList.remove(i),s.classList.remove(i),(this.options.transitionEffect===o||this.options.transitionEffect===l)&&s.classList.add(i),this.options.showThumbnails){var r=this.thumbnailsContainer.children;r[t].classList.remove(i),r[this.currentIndex].classList.add(i)}if(this.options.showBullets){var a=this.bulletsContainer.children;a[t].classList.remove(i),a[this.currentIndex].classList.add(i)}}},{key:"next",value:function(){this.goToSlide(this.currentIndex+1)}},{key:"prev",value:function(){this.goToSlide(this.currentIndex-1)}},{key:"zoomIn",value:function(){this.scale*=1.2,this.updateZoom()}},{key:"zoomOut",value:function(){this.scale/=1.2,this.scale<1&&(this.scale=1),this.updateZoom()}},{key:"resetZoom",value:function(){this.scale=1,this.translateX=0,this.translateY=0,this.isDragging=!1;var t=this.getCurrentWrapper();t.classList.remove("zoomed"),t.style.cursor="zoom-in",this.updateZoom()}},{key:"updateZoom",value:function(){var t=this.getCurrentWrapper(),e="scale(".concat(this.scale,") translate(").concat(this.translateX/this.scale,"px, ").concat(this.translateY/this.scale,"px)");t.style.transform=e,this.scale>1?(t.classList.add("zoomed"),t.style.cursor=this.isDragging?"grabbing":"grab"):(t.classList.remove("zoomed"),t.style.cursor="zoom-in")}},{key:"toggleFullscreen",value:function(){this.isFullscreen?document.exitFullscreen&&document.exitFullscreen():this.container.requestFullscreen&&this.container.requestFullscreen(),this.isFullscreen=!this.isFullscreen}},{key:"startAutoplay",value:function(){var t=this;this.autoplayInterval=setInterval((function(){t.next()}),this.options.autoplayInterval)}},{key:"stopAutoplay",value:function(){this.autoplayInterval&&clearInterval(this.autoplayInterval)}},{key:"resetAutoplay",value:function(){this.stopAutoplay(),this.startAutoplay()}},{key:"destroy",value:function(){this.autoplayInterval&&clearInterval(this.autoplayInterval),this.observer&&this.observer.disconnect()}}],e&&b(t.prototype,e),s&&b(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,s}();return e=e.default})()));